<!DOCTYPE html>
<html lang="en">
  <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>PTime</title>
   <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="//code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.css"> 
   <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
   <script src="//code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script>  

    <style>


body {
  margin: 0;
  padding: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.slider-container {
    position: relative;
 }
 
 .slider-container .slider {
    position: absolute;
    z-index: 3;
    left: 50%;
    top: 50%;
    margin: 0;
    width: 300px;
    height: 20px;
    outline: none;
    transform: rotate(-90deg) translate(-50%, -50%);
    transform-origin: 0 0;
  }

    </style>

  </head>
  <body>
  
   <div class="middle">
      <div class="slide-container" >
        <input type="range" name="savetime-slider" class="slider" id="savetime-slider" value="60" min="0" max="300"/>
      </div>
   </div>

    <script>

         function reset() {
            document.querySelector('input[name="exittime"]').value = "";
            document.querySelector('input[name="productivity"]').value = "";
            document.querySelector('input[name="totaltimehour"]').value = "08";
            document.querySelector('input[name="totaltimeminute"]').value = "00";
            document.querySelector('input[name="savetimehour"]').value = "00";
            document.querySelector('input[name="savetimeminute"]').value = "30";
         } 
         
         function calculate() {

            //alert(document.querySelector('input[name="entrytime"]').value);

            const entryTime = document.querySelector('input[name="entrytime"]').value.split(':');
            var entryTimeHour = parseInt(entryTime[0]);
            var entryTimeMinute = parseInt(entryTime[1]);
            
            var totalTimeHour = parseInt(document.querySelector('input[name="totaltimehour"]').value);
            var totalTimeMinute = parseInt(document.querySelector('input[name="totaltimeminute"]').value);
            var saveTimeHour = parseInt(document.querySelector('input[name="savetimehour"]').value);
            var saveTimeMinute = parseInt(document.querySelector('input[name="savetimeminute"]').value);


            //alert (entryTime);
            //alert (totalTimeHour+":"+totalTimeMinute);
            //alert (saveTimeHour+":"+saveTimeMinute);
            
            //var entrytime = $('#entrytime').val().split(':');
            //var totaltime = $('#totaltime').val().split(':');

            //alert(entryTime);

            //alert(entryTime[1]+":"+entryTime[0]);

            //alert(saveTimeInMinutes);

            var entryTimeInMinutes = (entryTimeHour*60)+entryTimeMinute;
            var totalTimeInMinutes = (totalTimeHour*60)+totalTimeMinute;
            var saveTimeInMinutes = (saveTimeHour*60)+saveTimeMinute;

            //alert (entryTimeInMinutes);
            //alert (totalTimeInMinutes);
            //alert (saveTimeInMinutes);

            var exitTimeInMinutes = entryTimeInMinutes + totalTimeInMinutes - saveTimeInMinutes;

            //alert (exitTimeInMinutes);

            var exitTimeHour = Math.floor(exitTimeInMinutes/60);

            var exitTimeMinute = exitTimeInMinutes%60;

            var productivityPercentage = (totalTimeInMinutes/(totalTimeInMinutes-saveTimeInMinutes))*100;

            var productivity = Math.round(productivityPercentage * 100) / 100;

            document.querySelector('input[name="exittime"]').value = String(exitTimeHour).padStart(2, '0')+":"+String(exitTimeMinute).padStart(2, '0');
             
            document.querySelector('input[name="productivity"]').value = String(productivity).padStart(2, '0');
        } 

    </script>


  </body>
</html>