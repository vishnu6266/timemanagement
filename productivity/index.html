<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <style>
.without_ampm::-webkit-datetime-edit-ampm-field {
   display: none;
 }
 input[type=time]::-webkit-clear-button {
   -webkit-appearance: none;
   -moz-appearance: none;
   -o-appearance: none;
   -ms-appearance:none;
   appearance: none;
   margin: -10px; 
 }
    </style>

  </head>
  <body>
    <main> 
        <div>
            <p style="text-align:center"><strong>Time Calculator</strong></p>
            <p style="text-align:center"><strong>Entry :&nbsp; <input type="datetime-local" id="entrytime" name="entrytime"></strong></p>
            <p style="text-align:center"><strong>Total Time :&nbsp; <input type="time" id="totaltime" name="totaltime" value="08:00" class="without_ampm"> </strong></p>
            <p style="text-align:center"><strong>Save Time :&nbsp; <input type="number" id="savetime" name="savetime" value="00:40"></strong>&nbsp;minutes</p>
            <p style="text-align:center"><strong>Exit :&nbsp; <input type="time-local" id="exittime" name="exittime"></strong></p>
            <!--<p style="text-align:center"><strong>Billable Time :&nbsp; <input type="time" id="billabletime" name="billabletime"></strong></p>
            <p style="text-align:center"><strong>Productivity (%):&nbsp;<input type="productivity" id="productivity" name="productivity" min="1" max="100"></strong></p>-->
            <p style="text-align:center">&nbsp;</p>
            <p style="text-align:center"><button type="button" onclick="reset()">Reset</button>&nbsp;&nbsp;&nbsp;<strong><button type="button" onclick="calculate()">Calculate</button></strong></p>
            <p style="text-align:center">&nbsp;</p>
        </div>    
    </main>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script>

         function reset() {
            alert('Reset!')
         } 
         
         function calculate() {

            const entrydatetime = new Date(document.querySelector('input[name="entrydatetime"]').value).toISOString();
            var totaltime = document.querySelector('input[name="totaltime"]').value.split(':');
            const savetime = document.querySelector('input[name="savetime"]').value;

            //var entrytime = $('#entrytime').val().split(':');
            //var totaltime = $('#totaltime').val().split(':');

            alert(entrydatetime);

            alert(totaltime);

            alert(savetime);


            var entryDateTimeValue = dayjs(entrydatetime);
            //var totaltimeValue = dayjs(totaltime, "HH:mm");

            alert(entryDateTimeValue);
            //alert(totaltimeValue);
            
            
            //var exitDateValue = entryDateValue.add(totaltimeValue.hour(), 'hour').add(totaltimeValue.minute(), 'minute').subtract(savetime,'minute');

            var exitDateValue = entryDateValue.add(totaltime[0], 'hour').add(totaltime[1], 'minute');

            alert(exitDateValue);

            document.querySelector('input[name="exittime"]').value = exitDateValue;
            
        } 

    </script>


  </body>
</html>