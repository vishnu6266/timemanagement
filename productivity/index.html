<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <style>
.without_ampm::-webkit-datetime-edit-ampm-field {
   display: none;
 }
 input[type=time]::-webkit-clear-button {
   -webkit-appearance: none;
   -moz-appearance: none;
   -o-appearance: none;
   -ms-appearance:none;
   appearance: none;
   margin: -10px; 
 }

 input[type='number']{
    width: 40px;
 } 
    </style>

  </head>
  <body>
    <main> 
        <div>
            <p style="text-align:center"><strong>Time Calculator</strong></p>
            <p style="text-align:center"><strong>Entry : </strong>&nbsp; <input type="time" id="entrytime" name="entrytime" value="08:00"></p>
            <p style="text-align:center"><strong>Total Time  </strong> :&nbsp; <input type="number" id="totaltimehour" name="totaltimehour" value="08"> &nbsp; hours &nbsp; <input type="number" id="totaltimeminute" name="totaltimeminute" value="00"> &nbsp; minutes</p>
            <p style="text-align:center"><strong>Save Time </strong> :&nbsp; <input type="number" id="savetimehour" name="savetimehour" value="08"> &nbsp; hours &nbsp; <input type="number" id="savetimeminute" name="savetimeminute" value="00"> &nbsp; minutes </p>
           <!--
            <p style="text-align:center"><strong>Save Time :&nbsp; <input type="number" id="savetime" name="savetime" value="00:40"></strong>&nbsp;minutes</p>-->
            <p style="text-align:center"><strong>Exit : </strong>&nbsp; <input type="time" id="exittime" name="exittime"></p>
            <!--<p style="text-align:center"><strong>Billable Time :&nbsp; <input type="time" id="billabletime" name="billabletime"></strong></p>
            <p style="text-align:center"><strong>Productivity (%):&nbsp;<input type="productivity" id="productivity" name="productivity" min="1" max="100"></strong></p>-->
            <p style="text-align:center">&nbsp;</p>
            <p style="text-align:center"><button type="button" onclick="reset()">Reset</button>&nbsp;&nbsp;&nbsp;<strong><button type="button" onclick="calculate()">Calculate</button></strong></p>
            <p style="text-align:center">&nbsp;</p>
        </div>    
    </main>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script>

         function reset() {
            alert('Reset!')
         } 
         
         function calculate() {

            //alert(document.querySelector('input[name="entrytime"]').value);

            const entryTime = document.querySelector('input[name="entrytime"]').value.split(':');
            var entryTimeHour = parseInt(entryTime[0]);
            var entryTimeMinute = parseInt(entryTime[1]);
            
            var totalTimeHour = parseInt(document.querySelector('input[name="totaltimehour"]').value);
            var totalTimeMinute = parseInt(document.querySelector('input[name="totaltimeminute"]').value);
            var saveTimeHour = parseInt(document.querySelector('input[name="savetimehour"]').value);
            var saveTimeMinute = parseInt(document.querySelector('input[name="savetimeminute"]').value);


            //alert (entryTime);
            //alert (totalTimeHour+":"+totalTimeMinute);
            //alert (saveTimeHour+":"+saveTimeMinute);
            
            //var entrytime = $('#entrytime').val().split(':');
            //var totaltime = $('#totaltime').val().split(':');

            //alert(entryTime);

            //alert(entryTime[1]+":"+entryTime[0]);

            //alert(saveTimeInMinutes);

            var entryTimeInMinutes = (entryTimeHour*60)+entryTimeMinute;
            var totalTimeInMinutes = (totalTimeHour*60)+totalTimeMinute;
            var saveTimeInMinutes = (saveTimeHour*60)+saveTimeMinute;

            //alert (entryTimeInMinutes);
            //alert (totalTimeInMinutes);
            //alert (saveTimeInMinutes);

            var exitTimeInMinutes = entryTimeInMinutes + totalTimeInMinutes - saveTimeInMinutes;

            //alert (exitTimeInMinutes);

            var exitTimeHour = Math.floor(exitTimeInMinutes/60);

            var exitTimeMinute = exitTimeInMinutes%60;

            //var entryDateTimeValue = dayjs(entrydatetime);
            //var totaltimeValue = dayjs(totaltime, "HH:mm");

            //alert(entryDateTimeValue);
            //alert(totaltimeValue);
            
            
            //var exitDateValue = entryDateValue.add(totaltimeValue.hour(), 'hour').add(totaltimeValue.minute(), 'minute').subtract(savetime,'minute');

            //var exitDateValue = entryDateValue.add(totaltime[0], 'hour').add(totaltime[1], 'minute');


            //alert(String(exitTimeHour).padStart(2, '0')+":"+String(exitTimeMinute).padStart(2, '0'));

            document.querySelector('input[name="exittime"]').value = String(exitTimeHour).padStart(2, '0')+":"+String(exitTimeMinute).padStart(2, '0');
            
        } 

    </script>


  </body>
</html>